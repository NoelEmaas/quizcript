#!/bin/bash

function get_question() {
    local quiz_id="$1"
    local question_id="$2"

    # read the existing JSON file
    json_data=$(cat quiz_data.json)

    # extract the question
    question=$(echo "$json_data" | jq --argjson qid "$quiz_id" --argjson quid "$question_id" '.quizzes[$qid].questions[$quid].question')

    # return the question
    echo "$question"
}

function get_answer() {
    local quiz_id="$1"
    local question_id="$2"

    # read the existing JSON file
    json_data=$(cat quiz_data.json)

    # extract the answer
    answer=$(echo "$json_data" | jq --argjson qid "$quiz_id" --argjson quid "$question_id" '.quizzes[$qid].questions[$quid].answer')

    # return the answer
    echo "$answer"
}

function get_quiz_titles() {
    # read the existing JSON file
    json_data=$(cat quiz_data.json)

    # extract the quiz titles
    quiz_titles=$(echo "$json_data" | jq '.quizzes[].title')

    # return the quiz titles
    echo "$quiz_titles"
}

function add_quiz() {
    local quiz_title="$1"

    # read the existing JSON file
    json_data=$(cat quiz_data.json)

    # create a new quiz object
    new_quiz=$(jq -n --arg title "$quiz_title" '{title: $title, questions: []}')

    # append the new quiz to the "quizzes" array
    updated_data=$(echo "$json_data" | jq ".quizzes += [$new_quiz]")

    # update the JSON file
    echo "$updated_data" > quiz_data.json
}

function add_question() {
    local quiz_id="$1"
    local question="$2"
    local answer="$3"

    # read the existing JSON file
    json_data=$(cat quiz_data.json)

    # create a new question object
    new_question=$(jq -n --arg q "$question" --arg a "$answer" '{question: $q, answer: $a}')

    # append the new question to the specified quiz
    updated_data=$(echo "$json_data" | jq ".quizzes[$quiz_id].questions += [$new_question]")

    echo "$updated_data" > quiz_data.json
}

function edit_quiz_title() {
    local quiz_id="$1"
    local new_title="$2"

    # read the existing JSON file
    json_data=$(cat quiz_data.json)

    # update the quiz title
    updated_data=$(echo "$json_data" | jq --argjson qid "$quiz_id" --arg title "$new_title" '.quizzes[$qid].title = $title')

    # update the JSON file
    echo "$updated_data" > quiz_data.json
}

function edit_question() {
    local quiz_id="$1"
    local question_id="$2"
    local new_question="$3"

    # read the existing JSON file
    json_data=$(cat quiz_data.json)

    # update the question
    updated_data=$(echo "$json_data" | jq --argjson qid "$quiz_id" --argjson quid "$question_id" --arg q "$new_question" '.quizzes[$qid].questions[$quid].question = $q')

    # update the JSON file
    echo "$updated_data" > quiz_data.json
}

function edit_answer() {
    local quiz_id="$1"
    local question_id="$2"
    local new_answer="$3"

    # read the existing JSON file
    json_data=$(cat quiz_data.json)

    # update the answer
    updated_data=$(echo "$json_data" | jq --argjson qid "$quiz_id" --argjson quid "$question_id" --arg a "$new_answer" '.quizzes[$qid].questions[$quid].answer = $a')

    # update the JSON file
    echo "$updated_data" > quiz_data.json
}

edit_answer 0 1 "Madrid"




